_G.AutoFruit = true -- Báº­t/táº¯t auto láº¥y trÃ¡i cÃ¢y
_G.ResetAfterGetFruit = true -- Báº­t/táº¯t reset nhÃ¢n váº­t sau khi láº¥y

-- ğŸ“Œ HÃ m láº¥y trÃ¡i cÃ¢y cÃ³ giÃ¡ trá»‹ Beli cao nháº¥t
function GetHighestValueFruitInInventory()
    local fruits = {}
    local player = game:GetService("Players").LocalPlayer
    local backpack = player:FindFirstChild("Backpack") or player:FindFirstChild("Inventory")

    if not backpack then
        print("âŒ KhÃ´ng tÃ¬m tháº¥y kho Ä‘á»“!")
        return nil
    end

    -- ğŸ“Œ Láº¥y danh sÃ¡ch trÃ¡i cÃ¢y trong kho
    for _, item in pairs(backpack:GetChildren()) do
        if item:IsA("Tool") and item:FindFirstChild("BeliValue") then
            table.insert(fruits, {name = item.Name, price = item.BeliValue.Value})
        end
    end

    -- ğŸ“Œ Sáº¯p xáº¿p trÃ¡i cÃ¢y theo giÃ¡ trá»‹ Beli giáº£m dáº§n
    table.sort(fruits, function(a, b) return a.price > b.price end)

    if #fruits > 0 then
        print("ğŸ” TrÃ¡i cÃ¢y giÃ¡ trá»‹ nháº¥t: " .. fruits[1].name .. " - GiÃ¡: " .. fruits[1].price)
        return fruits[1]
    else
        print("âŒ KhÃ´ng cÃ³ trÃ¡i cÃ¢y nÃ o trong kho Ä‘á»“!")
        return nil
    end
end

-- ğŸ“Œ HÃ m lÆ°u trÃ¡i cÃ¢y vÃ o kho
function StoreFruit(fruitName)
    local remote = game:GetService("ReplicatedStorage"):FindFirstChild("Remotes")
    if remote and remote:FindFirstChild("StoreFruit") then
        remote.StoreFruit:InvokeServer(fruitName)
        print("âœ… ÄÃ£ lÆ°u trÃ¡i cÃ¢y: " .. fruitName)
    else
        print("âŒ KhÃ´ng tÃ¬m tháº¥y sá»± kiá»‡n StoreFruit!")
    end
end

-- ğŸ“Œ HÃ m reset nhÃ¢n váº­t
function ResetCharacter()
    local player = game:GetService("Players").LocalPlayer
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.Health = 0 -- Reset nhÃ¢n váº­t báº±ng cÃ¡ch giáº£m mÃ¡u vá» 0
        print("ğŸ”„ Reset nhÃ¢n váº­t thÃ nh cÃ´ng!")
    else
        print("âŒ KhÃ´ng tÃ¬m tháº¥y Humanoid Ä‘á»ƒ reset nhÃ¢n váº­t!")
    end
end

-- ğŸ“Œ Cháº¡y vÃ²ng láº·p chÃ­nh
spawn(function()
    while _G.AutoFruit do
        wait(10) -- â³ Chá» 10 giÃ¢y trÆ°á»›c khi thá»±c hiá»‡n láº¡i

        local highestFruit = GetHighestValueFruitInInventory()
        if highestFruit then
            StoreFruit(highestFruit.name)
            if _G.ResetAfterGetFruit then
                ResetCharacter()
            end
        end
    end
end)
